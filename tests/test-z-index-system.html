<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Z-Index ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ - TravelLog</title>
    <link rel="stylesheet" href="../styles/main.css">
    <style>
        /* í…ŒìŠ¤íŠ¸ìš© ìŠ¤íƒ€ì¼ */
        .test-container {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-section {
            margin: 40px 0;
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: #f8f9fa;
        }
        
        .test-title {
            font-size: 24px;
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 20px;
        }
        
        .test-description {
            font-size: 16px;
            color: #4a5568;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .test-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .test-btn {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .test-btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }
        
        .test-btn.danger {
            background: #e53e3e;
        }
        
        .test-btn.danger:hover {
            background: #c53030;
        }
        
        .test-btn.success {
            background: #48bb78;
        }
        
        .test-btn.success:hover {
            background: #38a169;
        }
        
        .test-result {
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: monospace;
            font-size: 14px;
        }
        
        .test-result.success {
            background: #f0fff4;
            border: 1px solid #9ae6b4;
            color: #22543d;
        }
        
        .test-result.error {
            background: #fed7d7;
            border: 1px solid #feb2b2;
            color: #742a2a;
        }
        
        .test-result.info {
            background: #ebf8ff;
            border: 1px solid #90cdf4;
            color: #2a4365;
        }
        
        /* í…ŒìŠ¤íŠ¸ìš© ëª¨ë‹¬ */
        .test-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
        }
        
        .test-modal.open {
            display: flex;
        }
        
        .test-modal-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            max-width: 500px;
            width: 90%;
            position: relative;
        }
        
        .test-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #718096;
        }
        
        /* í…ŒìŠ¤íŠ¸ìš© ë“œë¡­ë‹¤ìš´ */
        .test-dropdown {
            position: relative;
            display: inline-block;
            margin: 10px;
        }
        
        .test-dropdown-btn {
            padding: 10px 20px;
            background: #48bb78;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .test-dropdown-content {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 10px;
            min-width: 200px;
            display: none;
            z-index: var(--z-dropdown);
        }
        
        .test-dropdown.open .test-dropdown-content {
            display: block;
        }
        
        /* í…ŒìŠ¤íŠ¸ìš© íˆ´íŒ */
        .test-tooltip {
            position: relative;
            display: inline-block;
            margin: 10px;
        }
        
        .test-tooltip-btn {
            padding: 10px 20px;
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .test-tooltip-content {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3748;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            white-space: nowrap;
            display: none;
            z-index: var(--z-tooltip);
        }
        
        .test-tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: #2d3748;
        }
        
        .test-tooltip.visible .test-tooltip-content {
            display: block;
        }
        
        /* Country Selector í…ŒìŠ¤íŠ¸ */
        .country-selector-test {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #667eea;
            border-radius: 12px;
            background: rgba(102, 126, 234, 0.05);
        }
        
        .country-selector-test h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        /* ë””ë²„ê·¸ ëª¨ë“œ ìŠ¤íƒ€ì¼ */
        .debug-z-index .country-selector,
        .debug-z-index .country-selector-v2 {
            outline: 3px solid #ff0000 !important;
            outline-offset: 3px !important;
        }
        
        .debug-z-index .modal {
            outline: 3px solid #0000ff !important;
            outline-offset: 3px !important;
        }
        
        .debug-z-index .dropdown {
            outline: 3px solid #ffff00 !important;
            outline-offset: 3px !important;
        }
        
        .debug-z-index .tooltip {
            outline: 3px solid #00ff00 !important;
            outline-offset: 3px !important;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ Z-Index ì‹œìŠ¤í…œ ì¢…í•© í…ŒìŠ¤íŠ¸</h1>
        <p>Country Selectorì˜ z-index ì˜¤ë²„ë ˆì´ ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì¢…í•© í…ŒìŠ¤íŠ¸ í˜ì´ì§€ì…ë‹ˆë‹¤.</p>
        
        <!-- í…ŒìŠ¤íŠ¸ 1: ê¸°ë³¸ Country Selector í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <div class="test-title">í…ŒìŠ¤íŠ¸ 1: ê¸°ë³¸ Country Selector ê¸°ëŠ¥</div>
            <div class="test-description">
                Country Selectorê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
            </div>
            <div class="test-controls">
                <button class="test-btn" onclick="testCountrySelector()">Country Selector í…ŒìŠ¤íŠ¸</button>
                <button class="test-btn" onclick="testCountrySelectorV2()">Country Selector V2 í…ŒìŠ¤íŠ¸</button>
            </div>
            <div class="country-selector-test">
                <h3>Country Selector (ê¸°ì¡´ ë²„ì „)</h3>
                <div class="country-selector" id="country-selector-1">
                    <div class="selector-input">
                        <input type="text" placeholder="êµ­ê°€ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”..." id="country-input-1">
                        <button class="dropdown-arrow" onclick="toggleDropdown('country-selector-1')">
                            <span class="arrow-icon">â–¼</span>
                        </button>
                    </div>
                    <div class="selector-dropdown" id="dropdown-1">
                        <div class="section-title">ì¸ê¸° êµ­ê°€</div>
                        <div class="countries-list">
                            <div class="country-item">
                                <span class="country-flag">ğŸ‡°ğŸ‡·</span>
                                <span class="country-name">ëŒ€í•œë¯¼êµ­</span>
                                <span class="country-name-en">South Korea</span>
                                <span class="country-continent">ASIA</span>
                            </div>
                            <div class="country-item">
                                <span class="country-flag">ğŸ‡¯ğŸ‡µ</span>
                                <span class="country-name">ì¼ë³¸</span>
                                <span class="country-name-en">Japan</span>
                                <span class="country-continent">ASIA</span>
                            </div>
                            <div class="country-item">
                                <span class="country-flag">ğŸ‡ºğŸ‡¸</span>
                                <span class="country-name">ë¯¸êµ­</span>
                                <span class="country-name-en">United States</span>
                                <span class="country-continent">NORTH AMERICA</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="country-selector-test">
                <h3>Country Selector V2 (ìƒˆ ë²„ì „)</h3>
                <div class="country-selector-v2" id="country-selector-2">
                    <div class="selector-input-container">
                        <input type="text" class="selector-input" placeholder="êµ­ê°€ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”..." id="country-input-2">
                        <button class="dropdown-arrow" onclick="toggleDropdownV2('country-selector-2')">
                            <span class="arrow-icon">â–¼</span>
                        </button>
                    </div>
                    <div class="selector-dropdown" id="dropdown-2">
                        <div class="section-title">ì¸ê¸° êµ­ê°€</div>
                        <div class="countries-list">
                            <div class="country-item">
                                <span class="country-flag">ğŸ‡°ğŸ‡·</span>
                                <span class="country-name">ëŒ€í•œë¯¼êµ­</span>
                                <span class="country-name-en">South Korea</span>
                                <span class="country-continent">ASIA</span>
                            </div>
                            <div class="country-item">
                                <span class="country-flag">ğŸ‡¯ğŸ‡µ</span>
                                <span class="country-name">ì¼ë³¸</span>
                                <span class="country-name-en">Japan</span>
                                <span class="country-continent">ASIA</span>
                            </div>
                            <div class="country-item">
                                <span class="country-flag">ğŸ‡ºğŸ‡¸</span>
                                <span class="country-name">ë¯¸êµ­</span>
                                <span class="country-name-en">United States</span>
                                <span class="country-continent">NORTH AMERICA</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="test-result-1" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 2: ëª¨ë‹¬ê³¼ì˜ ì¶©ëŒ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <div class="test-title">í…ŒìŠ¤íŠ¸ 2: ëª¨ë‹¬ê³¼ì˜ ì¶©ëŒ í•´ê²°</div>
            <div class="test-description">
                Country Selectorê°€ ëª¨ë‹¬ê³¼ í•¨ê»˜ ì‚¬ìš©ë  ë•Œ ì¶©ëŒì´ í•´ê²°ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
            </div>
            <div class="test-controls">
                <button class="test-btn" onclick="openTestModal()">ëª¨ë‹¬ ì—´ê¸°</button>
                <button class="test-btn danger" onclick="closeTestModal()">ëª¨ë‹¬ ë‹«ê¸°</button>
                <button class="test-btn" onclick="testModalConflict()">ì¶©ëŒ í…ŒìŠ¤íŠ¸</button>
            </div>
            <div class="test-modal" id="test-modal">
                <div class="test-modal-content">
                    <button class="test-modal-close" onclick="closeTestModal()">Ã—</button>
                    <h3>í…ŒìŠ¤íŠ¸ ëª¨ë‹¬</h3>
                    <p>ì´ ëª¨ë‹¬ì´ Country Selectorì™€ ì¶©ëŒí•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.</p>
                    <div class="country-selector-test">
                        <h4>ëª¨ë‹¬ ë‚´ë¶€ Country Selector</h4>
                        <div class="country-selector-v2" id="modal-country-selector">
                            <div class="selector-input-container">
                                <input type="text" class="selector-input" placeholder="êµ­ê°€ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”...">
                                <button class="dropdown-arrow" onclick="toggleDropdownV2('modal-country-selector')">
                                    <span class="arrow-icon">â–¼</span>
                                </button>
                            </div>
                            <div class="selector-dropdown">
                                <div class="section-title">ì¸ê¸° êµ­ê°€</div>
                                <div class="countries-list">
                                    <div class="country-item">
                                        <span class="country-flag">ğŸ‡°ğŸ‡·</span>
                                        <span class="country-name">ëŒ€í•œë¯¼êµ­</span>
                                        <span class="country-name-en">South Korea</span>
                                        <span class="country-continent">ASIA</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="test-result-2" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 3: ë‹¤ì¤‘ ë“œë¡­ë‹¤ìš´ ì¶©ëŒ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <div class="test-title">í…ŒìŠ¤íŠ¸ 3: ë‹¤ì¤‘ ë“œë¡­ë‹¤ìš´ ì¶©ëŒ í•´ê²°</div>
            <div class="test-description">
                ì—¬ëŸ¬ ë“œë¡­ë‹¤ìš´ì´ ë™ì‹œì— ì—´ë ¸ì„ ë•Œ Country Selectorê°€ ìµœìš°ì„ ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
            </div>
            <div class="test-controls">
                <button class="test-btn" onclick="openAllDropdowns()">ëª¨ë“  ë“œë¡­ë‹¤ìš´ ì—´ê¸°</button>
                <button class="test-btn danger" onclick="closeAllDropdowns()">ëª¨ë“  ë“œë¡­ë‹¤ìš´ ë‹«ê¸°</button>
                <button class="test-btn" onclick="testMultipleDropdowns()">ë‹¤ì¤‘ ì¶©ëŒ í…ŒìŠ¤íŠ¸</button>
            </div>
            <div class="test-dropdown">
                <button class="test-dropdown-btn" onclick="toggleTestDropdown('dropdown-1')">ì¼ë°˜ ë“œë¡­ë‹¤ìš´ 1</button>
                <div class="test-dropdown-content" id="dropdown-1">
                    <div>ë“œë¡­ë‹¤ìš´ í•­ëª© 1</div>
                    <div>ë“œë¡­ë‹¤ìš´ í•­ëª© 2</div>
                    <div>ë“œë¡­ë‹¤ìš´ í•­ëª© 3</div>
                </div>
            </div>
            <div class="test-dropdown">
                <button class="test-dropdown-btn" onclick="toggleTestDropdown('dropdown-2')">ì¼ë°˜ ë“œë¡­ë‹¤ìš´ 2</button>
                <div class="test-dropdown-content" id="dropdown-2">
                    <div>ë“œë¡­ë‹¤ìš´ í•­ëª© A</div>
                    <div>ë“œë¡­ë‹¤ìš´ í•­ëª© B</div>
                    <div>ë“œë¡­ë‹¤ìš´ í•­ëª© C</div>
                </div>
            </div>
            <div id="test-result-3" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 4: íˆ´íŒê³¼ì˜ ì¶©ëŒ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <div class="test-title">í…ŒìŠ¤íŠ¸ 4: íˆ´íŒê³¼ì˜ ì¶©ëŒ í•´ê²°</div>
            <div class="test-description">
                Country Selectorê°€ íˆ´íŒê³¼ í•¨ê»˜ ì‚¬ìš©ë  ë•Œ ì¶©ëŒì´ í•´ê²°ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
            </div>
            <div class="test-controls">
                <button class="test-btn" onclick="showAllTooltips()">ëª¨ë“  íˆ´íŒ í‘œì‹œ</button>
                <button class="test-btn danger" onclick="hideAllTooltips()">ëª¨ë“  íˆ´íŒ ìˆ¨ê¹€</button>
                <button class="test-btn" onclick="testTooltipConflict()">íˆ´íŒ ì¶©ëŒ í…ŒìŠ¤íŠ¸</button>
            </div>
            <div class="test-tooltip" id="tooltip-1">
                <button class="test-tooltip-btn" onclick="toggleTooltip('tooltip-1')">íˆ´íŒ 1</button>
                <div class="test-tooltip-content">ì´ê²ƒì€ íˆ´íŒ 1ì…ë‹ˆë‹¤.</div>
            </div>
            <div class="test-tooltip" id="tooltip-2">
                <button class="test-tooltip-btn" onclick="toggleTooltip('tooltip-2')">íˆ´íŒ 2</button>
                <div class="test-tooltip-content">ì´ê²ƒì€ íˆ´íŒ 2ì…ë‹ˆë‹¤.</div>
            </div>
            <div id="test-result-4" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 5: ëª¨ë°”ì¼ í™˜ê²½ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <div class="test-title">í…ŒìŠ¤íŠ¸ 5: ëª¨ë°”ì¼ í™˜ê²½ í´ë°±</div>
            <div class="test-description">
                ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ Country Selectorê°€ fullscreen ëª¨ë‹¬ë¡œ ì „í™˜ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
            </div>
            <div class="test-controls">
                <button class="test-btn" onclick="simulateMobile()">ëª¨ë°”ì¼ ì‹œë®¬ë ˆì´ì…˜</button>
                <button class="test-btn" onclick="simulateDesktop()">ë°ìŠ¤í¬í†± ì‹œë®¬ë ˆì´ì…˜</button>
                <button class="test-btn" onclick="testMobileFallback()">ëª¨ë°”ì¼ í´ë°± í…ŒìŠ¤íŠ¸</button>
            </div>
            <div id="test-result-5" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 6: ë””ë²„ê·¸ ëª¨ë“œ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <div class="test-title">í…ŒìŠ¤íŠ¸ 6: ë””ë²„ê·¸ ëª¨ë“œ</div>
            <div class="test-description">
                Z-Index ë””ë²„ê·¸ ëª¨ë“œë¥¼ í†µí•´ ì¶©ëŒ ìƒí™©ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.
            </div>
            <div class="test-controls">
                <button class="test-btn" onclick="enableDebugMode()">ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”</button>
                <button class="test-btn danger" onclick="disableDebugMode()">ë””ë²„ê·¸ ëª¨ë“œ ë¹„í™œì„±í™”</button>
                <button class="test-btn" onclick="showZIndexInfo()">Z-Index ì •ë³´ í‘œì‹œ</button>
            </div>
            <div id="test-result-6" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- í…ŒìŠ¤íŠ¸ 7: ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ -->
        <div class="test-section">
            <div class="test-title">í…ŒìŠ¤íŠ¸ 7: ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</div>
            <div class="test-description">
                Z-Index ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•©ë‹ˆë‹¤.
            </div>
            <div class="test-controls">
                <button class="test-btn" onclick="testPerformance()">ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</button>
                <button class="test-btn" onclick="testMemoryUsage()">ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í…ŒìŠ¤íŠ¸</button>
                <button class="test-btn" onclick="testConflictDetectionSpeed()">ì¶©ëŒ ê°ì§€ ì†ë„ í…ŒìŠ¤íŠ¸</button>
            </div>
            <div id="test-result-7" class="test-result" style="display: none;"></div>
        </div>
    </div>
    
    <script type="module">
        // Z-Index Manager ì´ˆê¸°í™”
        import ZIndexManager from '../js/modules/utils/z-index-manager.js';
        
        // ì „ì—­ ë³€ìˆ˜
        let zIndexManager;
        let testResults = {};
        
        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                zIndexManager = window.zIndexManager;
                console.log('Z-Index Manager ì´ˆê¸°í™” ì™„ë£Œ');
                
                // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì´ˆê¸°í™”
                testResults = {
                    countrySelector: false,
                    modalConflict: false,
                    multipleDropdowns: false,
                    tooltipConflict: false,
                    mobileFallback: false,
                    debugMode: false,
                    performance: false
                };
                
            } catch (error) {
                console.error('Z-Index Manager ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
            }
        });
        
        // Country Selector í…ŒìŠ¤íŠ¸
        window.testCountrySelector = function() {
            const selector = document.getElementById('country-selector-1');
            const result = document.getElementById('test-result-1');
            
            try {
                // ë“œë¡­ë‹¤ìš´ ì—´ê¸°
                selector.classList.add('open');
                
                // z-index í™•ì¸
                const computedStyle = window.getComputedStyle(selector);
                const zIndex = computedStyle.zIndex;
                
                if (zIndex && parseInt(zIndex) > 0) {
                    testResults.countrySelector = true;
                    showTestResult(result, 'success', `âœ… Country Selector ì •ìƒ ì‘ë™ (z-index: ${zIndex})`);
                } else {
                    showTestResult(result, 'error', 'âŒ Country Selector z-index ë¬¸ì œ');
                }
                
            } catch (error) {
                showTestResult(result, 'error', `âŒ Country Selector í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
        };
        
        // Country Selector V2 í…ŒìŠ¤íŠ¸
        window.testCountrySelectorV2 = function() {
            const selector = document.getElementById('country-selector-2');
            const result = document.getElementById('test-result-1');
            
            try {
                // ë“œë¡­ë‹¤ìš´ ì—´ê¸°
                selector.classList.add('open');
                
                // z-index í™•ì¸
                const computedStyle = window.getComputedStyle(selector);
                const zIndex = computedStyle.zIndex;
                
                if (zIndex && parseInt(zIndex) > 0) {
                    testResults.countrySelector = true;
                    showTestResult(result, 'success', `âœ… Country Selector V2 ì •ìƒ ì‘ë™ (z-index: ${zIndex})`);
                } else {
                    showTestResult(result, 'error', 'âŒ Country Selector V2 z-index ë¬¸ì œ');
                }
                
            } catch (error) {
                showTestResult(result, 'error', `âŒ Country Selector V2 í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
        };
        
        // ë“œë¡­ë‹¤ìš´ í† ê¸€ í•¨ìˆ˜ë“¤
        window.toggleDropdown = function(selectorId) {
            const selector = document.getElementById(selectorId);
            const dropdown = document.getElementById('dropdown-1');
            
            selector.classList.toggle('open');
            dropdown.classList.toggle('open');
        };
        
        window.toggleDropdownV2 = function(selectorId) {
            const selector = document.getElementById(selectorId);
            const dropdown = selector.querySelector('.selector-dropdown');
            
            selector.classList.toggle('open');
            dropdown.classList.toggle('open');
        };
        
        // ëª¨ë‹¬ í…ŒìŠ¤íŠ¸
        window.openTestModal = function() {
            const modal = document.getElementById('test-modal');
            modal.classList.add('open');
        };
        
        window.closeTestModal = function() {
            const modal = document.getElementById('test-modal');
            modal.classList.remove('open');
        };
        
        window.testModalConflict = function() {
            const result = document.getElementById('test-result-2');
            
            try {
                // ëª¨ë‹¬ ì—´ê¸°
                openTestModal();
                
                // Country Selector ì—´ê¸°
                const selector = document.getElementById('modal-country-selector');
                selector.classList.add('open');
                
                // ì¶©ëŒ í™•ì¸
                setTimeout(() => {
                    const selectorZIndex = window.getComputedStyle(selector).zIndex;
                    const modalZIndex = window.getComputedStyle(document.getElementById('test-modal')).zIndex;
                    
                    if (parseInt(selectorZIndex) > parseInt(modalZIndex)) {
                        testResults.modalConflict = true;
                        showTestResult(result, 'success', 'âœ… ëª¨ë‹¬ê³¼ì˜ ì¶©ëŒ í•´ê²°ë¨');
                    } else {
                        showTestResult(result, 'error', 'âŒ ëª¨ë‹¬ê³¼ì˜ ì¶©ëŒ í•´ê²° ì‹¤íŒ¨');
                    }
                }, 100);
                
            } catch (error) {
                showTestResult(result, 'error', `âŒ ëª¨ë‹¬ ì¶©ëŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
        };
        
        // ë‹¤ì¤‘ ë“œë¡­ë‹¤ìš´ í…ŒìŠ¤íŠ¸
        window.toggleTestDropdown = function(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            dropdown.parentElement.classList.toggle('open');
        };
        
        window.openAllDropdowns = function() {
            document.querySelectorAll('.test-dropdown').forEach(dropdown => {
                dropdown.classList.add('open');
            });
        };
        
        window.closeAllDropdowns = function() {
            document.querySelectorAll('.test-dropdown').forEach(dropdown => {
                dropdown.classList.remove('open');
            });
        };
        
        window.testMultipleDropdowns = function() {
            const result = document.getElementById('test-result-3');
            
            try {
                // ëª¨ë“  ë“œë¡­ë‹¤ìš´ ì—´ê¸°
                openAllDropdowns();
                
                // Country Selector ì—´ê¸°
                const selector = document.getElementById('country-selector-2');
                selector.classList.add('open');
                
                // ì¶©ëŒ í™•ì¸
                setTimeout(() => {
                    const selectorZIndex = parseInt(window.getComputedStyle(selector).zIndex);
                    const dropdownZIndexes = Array.from(document.querySelectorAll('.test-dropdown-content'))
                        .map(dropdown => parseInt(window.getComputedStyle(dropdown).zIndex));
                    
                    const maxDropdownZIndex = Math.max(...dropdownZIndexes);
                    
                    if (selectorZIndex > maxDropdownZIndex) {
                        testResults.multipleDropdowns = true;
                        showTestResult(result, 'success', 'âœ… ë‹¤ì¤‘ ë“œë¡­ë‹¤ìš´ ì¶©ëŒ í•´ê²°ë¨');
                    } else {
                        showTestResult(result, 'error', 'âŒ ë‹¤ì¤‘ ë“œë¡­ë‹¤ìš´ ì¶©ëŒ í•´ê²° ì‹¤íŒ¨');
                    }
                }, 100);
                
            } catch (error) {
                showTestResult(result, 'error', `âŒ ë‹¤ì¤‘ ë“œë¡­ë‹¤ìš´ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
        };
        
        // íˆ´íŒ í…ŒìŠ¤íŠ¸
        window.toggleTooltip = function(tooltipId) {
            const tooltip = document.getElementById(tooltipId);
            tooltip.classList.toggle('visible');
        };
        
        window.showAllTooltips = function() {
            document.querySelectorAll('.test-tooltip').forEach(tooltip => {
                tooltip.classList.add('visible');
            });
        };
        
        window.hideAllTooltips = function() {
            document.querySelectorAll('.test-tooltip').forEach(tooltip => {
                tooltip.classList.remove('visible');
            });
        };
        
        window.testTooltipConflict = function() {
            const result = document.getElementById('test-result-4');
            
            try {
                // ëª¨ë“  íˆ´íŒ í‘œì‹œ
                showAllTooltips();
                
                // Country Selector ì—´ê¸°
                const selector = document.getElementById('country-selector-2');
                selector.classList.add('open');
                
                // ì¶©ëŒ í™•ì¸
                setTimeout(() => {
                    const selectorZIndex = parseInt(window.getComputedStyle(selector).zIndex);
                    const tooltipZIndexes = Array.from(document.querySelectorAll('.test-tooltip-content'))
                        .map(tooltip => parseInt(window.getComputedStyle(tooltip).zIndex));
                    
                    const maxTooltipZIndex = Math.max(...tooltipZIndexes);
                    
                    if (selectorZIndex > maxTooltipZIndex) {
                        testResults.tooltipConflict = true;
                        showTestResult(result, 'success', 'âœ… íˆ´íŒê³¼ì˜ ì¶©ëŒ í•´ê²°ë¨');
                    } else {
                        showTestResult(result, 'error', 'âŒ íˆ´íŒê³¼ì˜ ì¶©ëŒ í•´ê²° ì‹¤íŒ¨');
                    }
                }, 100);
                
            } catch (error) {
                showTestResult(result, 'error', `âŒ íˆ´íŒ ì¶©ëŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
        };
        
        // ëª¨ë°”ì¼ í…ŒìŠ¤íŠ¸
        window.simulateMobile = function() {
            document.body.style.width = '375px';
            document.body.style.height = '667px';
            document.body.style.border = '2px solid #ccc';
        };
        
        window.simulateDesktop = function() {
            document.body.style.width = '100%';
            document.body.style.height = '100%';
            document.body.style.border = 'none';
        };
        
        window.testMobileFallback = function() {
            const result = document.getElementById('test-result-5');
            
            try {
                // ëª¨ë°”ì¼ ì‹œë®¬ë ˆì´ì…˜
                simulateMobile();
                
                // Country Selector ì—´ê¸°
                const selector = document.getElementById('country-selector-2');
                selector.classList.add('open');
                
                // í´ë°± ëª¨ë“œ í™•ì¸
                setTimeout(() => {
                    if (selector.classList.contains('mobile-fallback')) {
                        testResults.mobileFallback = true;
                        showTestResult(result, 'success', 'âœ… ëª¨ë°”ì¼ í´ë°± ëª¨ë“œ í™œì„±í™”ë¨');
                    } else {
                        showTestResult(result, 'info', 'â„¹ï¸ ëª¨ë°”ì¼ í´ë°± ëª¨ë“œê°€ í™œì„±í™”ë˜ì§€ ì•ŠìŒ (ì •ìƒì¼ ìˆ˜ ìˆìŒ)');
                    }
                }, 100);
                
            } catch (error) {
                showTestResult(result, 'error', `âŒ ëª¨ë°”ì¼ í´ë°± í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
        };
        
        // ë””ë²„ê·¸ ëª¨ë“œ í…ŒìŠ¤íŠ¸
        window.enableDebugMode = function() {
            if (zIndexManager) {
                zIndexManager.setDebugMode(true);
                document.body.classList.add('debug-z-index');
                showTestResult(document.getElementById('test-result-6'), 'info', 'ğŸ” ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”ë¨');
            }
        };
        
        window.disableDebugMode = function() {
            if (zIndexManager) {
                zIndexManager.setDebugMode(false);
                document.body.classList.remove('debug-z-index');
                showTestResult(document.getElementById('test-result-6'), 'info', 'ğŸ” ë””ë²„ê·¸ ëª¨ë“œ ë¹„í™œì„±í™”ë¨');
            }
        };
        
        window.showZIndexInfo = function() {
            const result = document.getElementById('test-result-6');
            
            if (zIndexManager) {
                const watchedElements = zIndexManager.getWatchedElements();
                const activeElements = zIndexManager.getActiveElements();
                const conflictHistory = zIndexManager.getConflictHistory();
                
                let info = `ğŸ“Š Z-Index ì •ë³´:\n`;
                info += `- ê°ì‹œ ì¤‘ì¸ ìš”ì†Œ: ${watchedElements.size}ê°œ\n`;
                info += `- í™œì„±í™”ëœ ìš”ì†Œ: ${activeElements.size}ê°œ\n`;
                info += `- ì¶©ëŒ í•´ê²° ê¸°ë¡: ${conflictHistory.length}ê°œ\n\n`;
                
                info += `ğŸ¯ CSS ë³€ìˆ˜ ê°’:\n`;
                const root = document.documentElement;
                const cssVars = [
                    '--z-country-selector',
                    '--z-country-dropdown',
                    '--z-modal',
                    '--z-dropdown',
                    '--z-tooltip'
                ];
                
                cssVars.forEach(varName => {
                    const value = getComputedStyle(root).getPropertyValue(varName);
                    info += `- ${varName}: ${value}\n`;
                });
                
                showTestResult(result, 'info', info);
            } else {
                showTestResult(result, 'error', 'âŒ Z-Index Managerê°€ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ');
            }
        };
        
        // ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
        window.testPerformance = function() {
            const result = document.getElementById('test-result-7');
            
            try {
                const startTime = performance.now();
                
                // 1000ë²ˆì˜ z-index ê³„ì‚°
                for (let i = 0; i < 1000; i++) {
                    const selector = document.getElementById('country-selector-2');
                    const zIndex = window.getComputedStyle(selector).zIndex;
                }
                
                const endTime = performance.now();
                const duration = endTime - startTime;
                
                if (duration < 100) {
                    testResults.performance = true;
                    showTestResult(result, 'success', `âœ… ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í†µê³¼ (${duration.toFixed(2)}ms)`);
                } else {
                    showTestResult(result, 'error', `âŒ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ (${duration.toFixed(2)}ms)`);
                }
                
            } catch (error) {
                showTestResult(result, 'error', `âŒ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
        };
        
        window.testMemoryUsage = function() {
            const result = document.getElementById('test-result-7');
            
            try {
                if (performance.memory) {
                    const memory = {
                        used: Math.round(performance.memory.usedJSHeapSize / 1024 / 1024),
                        total: Math.round(performance.memory.totalJSHeapSize / 1024 / 1024)
                    };
                    
                    showTestResult(result, 'info', `ğŸ’¾ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ${memory.used}MB / ${memory.total}MB`);
                } else {
                    showTestResult(result, 'info', 'â„¹ï¸ ë©”ëª¨ë¦¬ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
            } catch (error) {
                showTestResult(result, 'error', `âŒ ë©”ëª¨ë¦¬ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
        };
        
        window.testConflictDetectionSpeed = function() {
            const result = document.getElementById('test-result-7');
            
            try {
                if (zIndexManager) {
                    const startTime = performance.now();
                    
                    // ì¶©ëŒ ê°ì§€ ì‹¤í–‰
                    zIndexManager.detectConflicts();
                    
                    const endTime = performance.now();
                    const duration = endTime - startTime;
                    
                    if (duration < 50) {
                        showTestResult(result, 'success', `âœ… ì¶©ëŒ ê°ì§€ ì†ë„ ì–‘í˜¸ (${duration.toFixed(2)}ms)`);
                    } else {
                        showTestResult(result, 'error', `âŒ ì¶©ëŒ ê°ì§€ ì†ë„ ëŠë¦¼ (${duration.toFixed(2)}ms)`);
                    }
                } else {
                    showTestResult(result, 'error', 'âŒ Z-Index Managerê°€ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ');
                }
                
            } catch (error) {
                showTestResult(result, 'error', `âŒ ì¶©ëŒ ê°ì§€ ì†ë„ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`);
            }
        };
        
        // í…ŒìŠ¤íŠ¸ ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function showTestResult(element, type, message) {
            element.style.display = 'block';
            element.className = `test-result ${type}`;
            element.textContent = message;
        }
        
        // ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        window.runAllTests = function() {
            console.log('ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            // ëª¨ë“  í…ŒìŠ¤íŠ¸ ìˆœì°¨ ì‹¤í–‰
            setTimeout(() => testCountrySelector(), 100);
            setTimeout(() => testCountrySelectorV2(), 200);
            setTimeout(() => testModalConflict(), 300);
            setTimeout(() => testMultipleDropdowns(), 400);
            setTimeout(() => testTooltipConflict(), 500);
            setTimeout(() => testMobileFallback(), 600);
            setTimeout(() => testPerformance(), 700);
            
            // ê²°ê³¼ ìš”ì•½
            setTimeout(() => {
                const passedTests = Object.values(testResults).filter(result => result).length;
                const totalTests = Object.keys(testResults).length;
                
                console.log(`í…ŒìŠ¤íŠ¸ ì™„ë£Œ: ${passedTests}/${totalTests} í†µê³¼`);
                
                if (passedTests === totalTests) {
                    alert('ğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼! Z-Index ì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.');
                } else {
                    alert(`âš ï¸ ${passedTests}/${totalTests} í…ŒìŠ¤íŠ¸ í†µê³¼. ì¼ë¶€ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
                }
            }, 1000);
        };
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì˜µì…˜
        // window.runAllTests();
    </script>
</body>
</html>
