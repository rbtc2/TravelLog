<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TravelLog PHASE 1 데스크톱 레이아웃 테스트</title>
    <link rel="stylesheet" href="../styles/main.css">
    <style>
        /* 테스트용 스타일 */
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .test-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        
        .test-description {
            margin-bottom: 15px;
            color: #666;
        }
        
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .test-button:hover {
            background: #0056b3;
        }
        
        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .test-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .test-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .test-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>TravelLog PHASE 1 데스크톱 레이아웃 테스트</h1>
        
        <!-- 테스트 1: 데스크톱 레이아웃 매니저 초기화 -->
        <div class="test-section">
            <div class="test-title">테스트 1: 데스크톱 레이아웃 매니저 초기화</div>
            <div class="test-description">데스크톱 레이아웃 매니저가 올바르게 초기화되는지 확인합니다.</div>
            <button class="test-button" onclick="testDesktopLayoutManagerInit()">초기화 테스트</button>
            <div id="test1-result" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- 테스트 2: 레이아웃 모드 전환 -->
        <div class="test-section">
            <div class="test-title">테스트 2: 레이아웃 모드 전환</div>
            <div class="test-description">모바일 모드와 데스크톱 모드 간 전환이 올바르게 작동하는지 확인합니다.</div>
            <button class="test-button" onclick="testLayoutModeSwitch()">모드 전환 테스트</button>
            <div id="test2-result" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- 테스트 3: 데스크톱 레이아웃 생성 -->
        <div class="test-section">
            <div class="test-title">테스트 3: 데스크톱 레이아웃 생성</div>
            <div class="test-description">데스크톱 레이아웃이 올바르게 생성되는지 확인합니다.</div>
            <button class="test-button" onclick="testDesktopLayoutCreation()">레이아웃 생성 테스트</button>
            <div id="test3-result" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- 테스트 4: 사이드바 네비게이션 -->
        <div class="test-section">
            <div class="test-title">테스트 4: 사이드바 네비게이션</div>
            <div class="test-description">사이드바 네비게이션이 올바르게 작동하는지 확인합니다.</div>
            <button class="test-button" onclick="testSidebarNavigation()">네비게이션 테스트</button>
            <div id="test4-result" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- 테스트 5: 반응형 브레이크포인트 -->
        <div class="test-section">
            <div class="test-title">테스트 5: 반응형 브레이크포인트</div>
            <div class="test-description">다양한 화면 크기에서 레이아웃이 올바르게 반응하는지 확인합니다.</div>
            <button class="test-button" onclick="testResponsiveBreakpoints()">브레이크포인트 테스트</button>
            <div id="test5-result" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- 테스트 6: 탭 전환 기능 -->
        <div class="test-section">
            <div class="test-title">테스트 6: 탭 전환 기능</div>
            <div class="test-description">데스크톱 레이아웃에서 탭 전환이 올바르게 작동하는지 확인합니다.</div>
            <button class="test-button" onclick="testTabSwitching()">탭 전환 테스트</button>
            <div id="test6-result" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- 테스트 7: 로그인 화면에서 데스크톱 레이아웃 숨김 -->
        <div class="test-section">
            <div class="test-title">테스트 7: 로그인 화면에서 데스크톱 레이아웃 숨김</div>
            <div class="test-description">로그인 화면에서 데스크톱 레이아웃이 완전히 숨겨지는지 확인합니다.</div>
            <button class="test-button" onclick="testLoginScreenDesktopHide()">로그인 화면 테스트</button>
            <div id="test7-result" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- 테스트 8: 데스크톱 모드에서 모바일 탭 네비게이션 숨김 -->
        <div class="test-section">
            <div class="test-title">테스트 8: 데스크톱 모드에서 모바일 탭 네비게이션 숨김</div>
            <div class="test-description">데스크톱 모드에서 하단 모바일 탭 네비게이션이 숨겨지는지 확인합니다.</div>
            <button class="test-button" onclick="testDesktopModeMobileNavHide()">모바일 네비게이션 숨김 테스트</button>
            <div id="test8-result" class="test-result" style="display: none;"></div>
        </div>
        
        <!-- 전체 테스트 실행 -->
        <div class="test-section">
            <div class="test-title">전체 테스트 실행</div>
            <div class="test-description">모든 테스트를 순차적으로 실행합니다.</div>
            <button class="test-button" onclick="runAllTests()" style="background: #28a745;">전체 테스트 실행</button>
            <div id="all-tests-result" class="test-result" style="display: none;"></div>
        </div>
    </div>

    <script type="module">
        // 테스트 결과 표시 함수
        function showTestResult(testId, success, message) {
            const resultDiv = document.getElementById(testId);
            resultDiv.style.display = 'block';
            resultDiv.className = `test-result ${success ? 'test-success' : 'test-error'}`;
            resultDiv.textContent = message;
        }
        
        function showTestInfo(testId, message) {
            const resultDiv = document.getElementById(testId);
            resultDiv.style.display = 'block';
            resultDiv.className = 'test-result test-info';
            resultDiv.textContent = message;
        }
        
        // 테스트 1: 데스크톱 레이아웃 매니저 초기화
        window.testDesktopLayoutManagerInit = async function() {
            try {
                const { default: DesktopLayoutManager } = await import('../js/modules/desktop-layout-manager.js');
                const manager = new DesktopLayoutManager();
                await manager.initialize();
                
                const currentMode = manager.getCurrentMode();
                const isDesktop = manager.isDesktopMode();
                const isMobile = manager.isMobileMode();
                
                showTestResult('test1-result', true, 
                    `초기화 성공! 현재 모드: ${currentMode}, 데스크톱: ${isDesktop}, 모바일: ${isMobile}`);
            } catch (error) {
                showTestResult('test1-result', false, `초기화 실패: ${error.message}`);
            }
        };
        
        // 테스트 2: 레이아웃 모드 전환
        window.testLayoutModeSwitch = async function() {
            try {
                const { default: DesktopLayoutManager } = await import('../js/modules/desktop-layout-manager.js');
                const manager = new DesktopLayoutManager();
                await manager.initialize();
                
                // 모바일 모드로 전환
                await manager.switchMode('mobile');
                const mobileMode = manager.getCurrentMode();
                
                // 데스크톱 모드로 전환
                await manager.switchMode('desktop');
                const desktopMode = manager.getCurrentMode();
                
                showTestResult('test2-result', true, 
                    `모드 전환 성공! 모바일: ${mobileMode}, 데스크톱: ${desktopMode}`);
            } catch (error) {
                showTestResult('test2-result', false, `모드 전환 실패: ${error.message}`);
            }
        };
        
        // 테스트 3: 데스크톱 레이아웃 생성
        window.testDesktopLayoutCreation = async function() {
            try {
                const { default: DesktopLayoutManager } = await import('../js/modules/desktop-layout-manager.js');
                const manager = new DesktopLayoutManager();
                await manager.initialize();
                
                // 데스크톱 모드로 전환
                await manager.switchMode('desktop');
                
                // 데스크톱 레이아웃 요소 확인
                const desktopLayout = document.querySelector('.desktop-layout');
                const sidebar = document.querySelector('.desktop-sidebar');
                const mainContent = document.querySelector('.desktop-main-content');
                const grid = document.querySelector('.desktop-grid');
                
                const hasLayout = !!desktopLayout;
                const hasSidebar = !!sidebar;
                const hasMainContent = !!mainContent;
                const hasGrid = !!grid;
                
                if (hasLayout && hasSidebar && hasMainContent && hasGrid) {
                    showTestResult('test3-result', true, 
                        '데스크톱 레이아웃 생성 성공! 모든 요소가 올바르게 생성되었습니다.');
                } else {
                    showTestResult('test3-result', false, 
                        `레이아웃 생성 실패! Layout: ${hasLayout}, Sidebar: ${hasSidebar}, Main: ${hasMainContent}, Grid: ${hasGrid}`);
                }
            } catch (error) {
                showTestResult('test3-result', false, `레이아웃 생성 실패: ${error.message}`);
            }
        };
        
        // 테스트 4: 사이드바 네비게이션
        window.testSidebarNavigation = async function() {
            try {
                const { default: DesktopLayoutManager } = await import('../js/modules/desktop-layout-manager.js');
                const manager = new DesktopLayoutManager();
                await manager.initialize();
                
                // 데스크톱 모드로 전환
                await manager.switchMode('desktop');
                
                // 네비게이션 아이템 확인
                const navItems = document.querySelectorAll('.desktop-sidebar-nav-item');
                const activeItem = document.querySelector('.desktop-sidebar-nav-item.active');
                
                if (navItems.length > 0 && activeItem) {
                    showTestResult('test4-result', true, 
                        `사이드바 네비게이션 성공! 아이템 수: ${navItems.length}, 활성 아이템: ${activeItem.dataset.tab}`);
                } else {
                    showTestResult('test4-result', false, 
                        `네비게이션 실패! 아이템 수: ${navItems.length}, 활성 아이템: ${!!activeItem}`);
                }
            } catch (error) {
                showTestResult('test4-result', false, `네비게이션 테스트 실패: ${error.message}`);
            }
        };
        
        // 테스트 5: 반응형 브레이크포인트
        window.testResponsiveBreakpoints = function() {
            const screenWidth = window.innerWidth;
            let breakpoint = '';
            let expectedMode = '';
            
            if (screenWidth >= 1600) {
                breakpoint = '초대형 데스크톱 (1600px+)';
                expectedMode = 'desktop';
            } else if (screenWidth >= 1440) {
                breakpoint = '대형 데스크톱 (1440px-1599px)';
                expectedMode = 'desktop';
            } else if (screenWidth >= 1280) {
                breakpoint = '중형 데스크톱 (1280px-1439px)';
                expectedMode = 'mobile (사용자 설정)';
            } else if (screenWidth >= 1024) {
                breakpoint = '소형 데스크톱 (1024px-1279px)';
                expectedMode = 'mobile (사용자 설정)';
            } else if (screenWidth >= 768) {
                breakpoint = '태블릿 (768px-1023px)';
                expectedMode = 'mobile';
            } else {
                breakpoint = '모바일 (768px 미만)';
                expectedMode = 'mobile';
            }
            
            showTestInfo('test5-result', 
                `현재 화면 크기: ${screenWidth}px (${breakpoint}), 예상 모드: ${expectedMode}`);
        };
        
        // 테스트 6: 탭 전환 기능
        window.testTabSwitching = async function() {
            try {
                const { default: DesktopLayoutManager } = await import('../js/modules/desktop-layout-manager.js');
                const manager = new DesktopLayoutManager();
                await manager.initialize();
                
                // 데스크톱 모드로 전환
                await manager.switchMode('desktop');
                
                // 탭 전환 테스트
                const navItems = document.querySelectorAll('.desktop-sidebar-nav-item');
                if (navItems.length > 0) {
                    // 첫 번째 탭 클릭
                    const firstTab = navItems[0];
                    const tabName = firstTab.dataset.tab;
                    
                    // 탭 클릭 이벤트 시뮬레이션
                    firstTab.click();
                    
                    // 활성 탭 확인
                    const activeItem = document.querySelector('.desktop-sidebar-nav-item.active');
                    
                    if (activeItem && activeItem.dataset.tab === tabName) {
                        showTestResult('test6-result', true, 
                            `탭 전환 성공! 활성 탭: ${tabName}`);
                    } else {
                        showTestResult('test6-result', false, 
                            `탭 전환 실패! 예상: ${tabName}, 실제: ${activeItem ? activeItem.dataset.tab : 'none'}`);
                    }
                } else {
                    showTestResult('test6-result', false, '탭 아이템을 찾을 수 없습니다.');
                }
            } catch (error) {
                showTestResult('test6-result', false, `탭 전환 테스트 실패: ${error.message}`);
            }
        };
        
        // 테스트 7: 로그인 화면에서 데스크톱 레이아웃 숨김
        window.testLoginScreenDesktopHide = function() {
            try {
                // 로그인 화면 시뮬레이션
                const loginScreen = document.createElement('div');
                loginScreen.id = 'login-screen';
                loginScreen.style.display = 'flex';
                document.body.appendChild(loginScreen);
                
                // 데스크톱 레이아웃 생성
                const desktopLayout = document.createElement('div');
                desktopLayout.className = 'desktop-layout';
                desktopLayout.innerHTML = '<div>데스크톱 레이아웃</div>';
                document.body.appendChild(desktopLayout);
                
                // 데스크톱 토글 버튼 생성
                const toggleButton = document.createElement('button');
                toggleButton.className = 'desktop-layout-toggle';
                toggleButton.style.display = 'flex';
                document.body.appendChild(toggleButton);
                
                // CSS 규칙 적용 확인
                const computedStyle = window.getComputedStyle(desktopLayout);
                const isHidden = computedStyle.display === 'none';
                
                // 정리
                loginScreen.remove();
                desktopLayout.remove();
                toggleButton.remove();
                
                if (isHidden) {
                    showTestResult('test7-result', true, 
                        '로그인 화면에서 데스크톱 레이아웃이 올바르게 숨겨집니다.');
                } else {
                    showTestResult('test7-result', false, 
                        '로그인 화면에서 데스크톱 레이아웃이 숨겨지지 않습니다.');
                }
            } catch (error) {
                showTestResult('test7-result', false, `로그인 화면 테스트 실패: ${error.message}`);
            }
        };
        
        // 테스트 8: 데스크톱 모드에서 모바일 탭 네비게이션 숨김
        window.testDesktopModeMobileNavHide = function() {
            try {
                // 메인 앱 시뮬레이션
                const mainApp = document.createElement('div');
                mainApp.className = 'main-app desktop-mode';
                document.body.appendChild(mainApp);
                
                // 모바일 탭 네비게이션 생성
                const mobileNav = document.createElement('div');
                mobileNav.id = 'tab-navigation';
                mobileNav.innerHTML = '<div>모바일 탭 네비게이션</div>';
                mainApp.appendChild(mobileNav);
                
                // 데스크톱 레이아웃 생성
                const desktopLayout = document.createElement('div');
                desktopLayout.className = 'desktop-layout';
                desktopLayout.innerHTML = '<div>데스크톱 레이아웃</div>';
                mainApp.appendChild(desktopLayout);
                
                // CSS 규칙 적용 확인
                const mobileNavStyle = window.getComputedStyle(mobileNav);
                const isMobileNavHidden = mobileNavStyle.display === 'none';
                
                // 정리
                mainApp.remove();
                
                if (isMobileNavHidden) {
                    showTestResult('test8-result', true, 
                        '데스크톱 모드에서 모바일 탭 네비게이션이 올바르게 숨겨집니다.');
                } else {
                    showTestResult('test8-result', false, 
                        '데스크톱 모드에서 모바일 탭 네비게이션이 숨겨지지 않습니다.');
                }
            } catch (error) {
                showTestResult('test8-result', false, `모바일 네비게이션 숨김 테스트 실패: ${error.message}`);
            }
        };
        
        // 전체 테스트 실행
        window.runAllTests = async function() {
            const tests = [
                { name: '데스크톱 레이아웃 매니저 초기화', func: testDesktopLayoutManagerInit },
                { name: '레이아웃 모드 전환', func: testLayoutModeSwitch },
                { name: '데스크톱 레이아웃 생성', func: testDesktopLayoutCreation },
                { name: '사이드바 네비게이션', func: testSidebarNavigation },
                { name: '반응형 브레이크포인트', func: testResponsiveBreakpoints },
                { name: '탭 전환 기능', func: testTabSwitching },
                { name: '로그인 화면에서 데스크톱 레이아웃 숨김', func: testLoginScreenDesktopHide },
                { name: '데스크톱 모드에서 모바일 탭 네비게이션 숨김', func: testDesktopModeMobileNavHide }
            ];
            
            let passed = 0;
            let failed = 0;
            
            for (const test of tests) {
                try {
                    await test.func();
                    passed++;
                } catch (error) {
                    failed++;
                    console.error(`${test.name} 실패:`, error);
                }
            }
            
            const resultDiv = document.getElementById('all-tests-result');
            resultDiv.style.display = 'block';
            resultDiv.className = `test-result ${failed === 0 ? 'test-success' : 'test-error'}`;
            resultDiv.textContent = `전체 테스트 완료! 성공: ${passed}, 실패: ${failed}`;
        };
        
        // 페이지 로드 시 브레이크포인트 테스트 자동 실행
        window.addEventListener('load', () => {
            testResponsiveBreakpoints();
        });
    </script>
</body>
</html>
