<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CountrySelector í†µí•© í…ŒìŠ¤íŠ¸ - ì—¬í–‰ ì¼ì§€ ì¶”ê°€</title>
    <link rel="stylesheet" href="styles/main.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            background: #fafafa;
        }
        
        .test-title {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.2em;
            font-weight: 600;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }
        
        .form-label.required::after {
            content: ' *';
            color: #e74c3c;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-input:disabled {
            background-color: #f5f5f5;
            color: #999;
            cursor: not-allowed;
        }
        
        .form-hint {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .form-error {
            color: #e74c3c;
            font-size: 14px;
            margin-top: 5px;
            min-height: 20px;
        }
        
        .test-info {
            background: #e3f2fd;
            border: 1px solid #2196f3;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .test-info h3 {
            color: #1976d2;
            margin: 0 0 10px 0;
            font-size: 1.1em;
        }
        
        .test-info ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .test-info li {
            margin-bottom: 5px;
            color: #1565c0;
        }
        
        .status-display {
            background: #f1f8e9;
            border: 1px solid #4caf50;
            border-radius: 6px;
            padding: 15px;
            margin-top: 20px;
        }
        
        .status-display h4 {
            color: #2e7d32;
            margin: 0 0 10px 0;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            padding: 5px 0;
            border-bottom: 1px solid #e8f5e8;
        }
        
        .status-label {
            font-weight: 500;
            color: #2e7d32;
        }
        
        .status-value {
            color: #1b5e20;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸŒ CountrySelector í†µí•© í…ŒìŠ¤íŠ¸</h1>
            <p>ì—¬í–‰ ì¼ì§€ ì¶”ê°€ íƒ­ì—ì„œ CountrySelector ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸</p>
        </div>
        
        <div class="test-section">
            <div class="test-info">
                <h3>í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥</h3>
                <ul>
                    <li>âœ… ê²€ìƒ‰ ê°€ëŠ¥í•œ êµ­ê°€ ë“œë¡­ë‹¤ìš´</li>
                    <li>âœ… ì¸ê¸° êµ­ê°€ ê·¸ë¦¬ë“œ (ìµœëŒ€ 12ê°œ)</li>
                    <li>âœ… ì „ì²´ êµ­ê°€ ìŠ¤í¬ë¡¤ ë¦¬ìŠ¤íŠ¸</li>
                    <li>âœ… í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ (í™”ì‚´í‘œ, Enter, ESC)</li>
                    <li>âœ… ëª¨ë°”ì¼ ìµœì í™”</li>
                    <li>âœ… êµ­ê°€ ì„ íƒ ì‹œ ë„ì‹œ ì…ë ¥ í•„ë“œ í™œì„±í™”</li>
                </ul>
            </div>
            
            <div class="test-info">
                <h3>ì„±ëŠ¥ ë° í’ˆì§ˆ ê¸°ì¤€</h3>
                <ul>
                    <li>ğŸ¯ ì»´í¬ë„ŒíŠ¸ ì´ˆê¸°í™”: 50ms ì´í•˜</li>
                    <li>âš¡ ê²€ìƒ‰ ì‘ë‹µ: 30ms ì´í•˜</li>
                    <li>ğŸ¬ ë“œë¡­ë‹¤ìš´ ì• ë‹ˆë©”ì´ì…˜: ë¶€ë“œëŸ¬ì›€</li>
                    <li>ğŸ’¾ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ìŒ</li>
                    <li>âŒ¨ï¸ í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜ ì™„ë²½ ì§€ì›</li>
                    <li>ğŸ“± ëª¨ë°”ì¼ í„°ì¹˜ ìµœì í™”</li>
                </ul>
            </div>
            
            <form class="add-log-form" id="add-log-form">
                <!-- êµ­ê°€ ì…ë ¥ -->
                <div class="form-group">
                    <label for="country" class="form-label required">êµ­ê°€</label>
                    <div id="country-selector-container">
                        <!-- CountrySelector ì»´í¬ë„ŒíŠ¸ê°€ ì—¬ê¸°ì— ë Œë”ë§ë©ë‹ˆë‹¤ -->
                    </div>
                    <input 
                        type="hidden" 
                        id="country" 
                        name="country" 
                        required
                    >
                    <div class="form-hint">ì—¬í–‰í•  êµ­ê°€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”. ê²€ìƒ‰ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
                    <div class="form-error" id="country-error"></div>
                </div>
                
                <!-- ë„ì‹œ ì…ë ¥ -->
                <div class="form-group">
                    <label for="city" class="form-label required">ë„ì‹œ</label>
                    <input 
                        type="text" 
                        id="city" 
                        name="city" 
                        class="form-input" 
                        placeholder="êµ­ê°€ë¥¼ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”"
                        maxlength="50"
                        disabled
                        required
                    >
                    <div class="form-error" id="city-error"></div>
                </div>
                
                <!-- ì²´ë¥˜ ì‹œì‘ì¼ -->
                <div class="form-group">
                    <label for="startDate" class="form-label required">ì²´ë¥˜ ì‹œì‘ì¼</label>
                    <input 
                        type="date" 
                        id="startDate" 
                        name="startDate" 
                        class="form-input" 
                        required
                    >
                    <div class="form-error" id="startDate-error"></div>
                </div>
                
                <!-- ì²´ë¥˜ ì¢…ë£Œì¼ -->
                <div class="form-group">
                    <label for="endDate" class="form-label required">ì²´ë¥˜ ì¢…ë£Œì¼</label>
                    <input 
                        type="date" 
                        id="endDate" 
                        name="endDate" 
                        class="form-input" 
                        disabled
                        required
                    >
                    <div class="form-error" id="endDate-error"></div>
                </div>
            </form>
        </div>
        
        <div class="status-display">
            <h4>ì»´í¬ë„ŒíŠ¸ ìƒíƒœ</h4>
            <div id="status-content">
                <div class="status-item">
                    <span class="status-label">CountrySelector:</span>
                    <span class="status-value" id="selector-status">ì´ˆê¸°í™” ì¤‘...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">ì„ íƒëœ êµ­ê°€:</span>
                    <span class="status-value" id="selected-country">ì—†ìŒ</span>
                </div>
                <div class="status-item">
                    <span class="status-label">ë„ì‹œ ì…ë ¥ ìƒíƒœ:</span>
                    <span class="status-value" id="city-status">ë¹„í™œì„±í™”</span>
                </div>
            </div>
        </div>
        
        <div class="status-display">
            <h4>ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§</h4>
            <div id="performance-content">
                <div class="status-item">
                    <span class="status-label">ì´ˆê¸°í™” ì‹œê°„:</span>
                    <span class="status-value" id="init-time">ì¸¡ì • ì¤‘...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">ê²€ìƒ‰ ì‘ë‹µ:</span>
                    <span class="status-value" id="search-time">ëŒ€ê¸° ì¤‘...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰:</span>
                    <span class="status-value" id="memory-usage">í™•ì¸ ì¤‘...</span>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { createCountrySelector } from './js/modules/ui-components/country-selector.js';

        // ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateStatus(selector) {
            const statusContent = document.getElementById('status-content');
            
            if (selector) {
                const status = selector.getStatus();
                const selectedCountry = selector.getSelectedCountry();
                
                document.getElementById('selector-status').textContent = 'ì´ˆê¸°í™” ì™„ë£Œ';
                document.getElementById('selected-country').textContent = 
                    selectedCountry ? `${selectedCountry.nameKo} (${selectedCountry.code})` : 'ì—†ìŒ';
                document.getElementById('city-status').textContent = 
                    selectedCountry ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”';
            } else {
                document.getElementById('selector-status').textContent = 'ì´ˆê¸°í™” ì‹¤íŒ¨';
            }
        }

        // CountrySelector ì´ˆê¸°í™”
        async function initializeCountrySelector() {
            try {
                const container = document.getElementById('country-selector-container');
                if (!container) {
                    console.error('ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                // ì„±ëŠ¥ ì¸¡ì • ì‹œì‘
                const startTime = performance.now();
                
                // CountrySelector ìƒì„± ë° ì´ˆê¸°í™”
                const selector = await createCountrySelector(container, {
                    placeholder: 'êµ­ê°€ë¥¼ ê²€ìƒ‰í•˜ì„¸ìš”',
                    showFlags: true,
                    showEnglishNames: true,
                    maxPopularCountries: 12
                });

                // ì„±ëŠ¥ ì¸¡ì • ì¢…ë£Œ
                const endTime = performance.now();
                const initDuration = endTime - startTime;
                console.log(`â±ï¸ CountrySelector ì´ˆê¸°í™”: ${initDuration.toFixed(2)}ms`);
                
                // ì„±ëŠ¥ ê¸°ì¤€ í™•ì¸
                if (initDuration > 50) {
                    console.warn(`âš ï¸ ì´ˆê¸°í™”ê°€ ëª©í‘œ ì‹œê°„(50ms)ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.`);
                }
                
                // ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ê²°ê³¼ ì—…ë°ì´íŠ¸
                document.getElementById('init-time').textContent = `${initDuration.toFixed(2)}ms`;
                if (initDuration > 50) {
                    document.getElementById('init-time').style.color = '#e74c3c';
                } else {
                    document.getElementById('init-time').style.color = '#27ae60';
                }

                // êµ­ê°€ ì„ íƒ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
                container.addEventListener('country-selected', (event) => {
                    const selectedCountry = event.detail;
                    console.log('ì„ íƒëœ êµ­ê°€:', selectedCountry);
                    
                    // hidden input ì—…ë°ì´íŠ¸
                    const countryInput = document.getElementById('country');
                    if (countryInput) {
                        countryInput.value = selectedCountry.code;
                    }

                    // ë„ì‹œ ì…ë ¥ í•„ë“œ í™œì„±í™”
                    const cityInput = document.getElementById('city');
                    if (cityInput) {
                        cityInput.disabled = false;
                        cityInput.placeholder = `${selectedCountry.nameKo}ì˜ ë„ì‹œë¥¼ ì…ë ¥í•˜ì„¸ìš”`;
                    }

                    // ìƒíƒœ ì—…ë°ì´íŠ¸
                    updateStatus(selector);
                });

                // ìƒíƒœ ì—…ë°ì´íŠ¸
                updateStatus(selector);
                
                // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ í™•ì¸ ë° í‘œì‹œ
                if (performance.memory) {
                    const memoryInfo = {
                        used: Math.round(performance.memory.usedJSHeapSize / 1048576 * 100) / 100,
                        total: Math.round(performance.memory.totalJSHeapSize / 1048576 * 100) / 100
                    };
                    document.getElementById('memory-usage').textContent = `${memoryInfo.used}MB / ${memoryInfo.total}MB`;
                } else {
                    document.getElementById('memory-usage').textContent = 'N/A';
                }

                console.log('CountrySelector ì´ˆê¸°í™” ì™„ë£Œ');

            } catch (error) {
                console.error('CountrySelector ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                document.getElementById('selector-status').textContent = 'ì´ˆê¸°í™” ì‹¤íŒ¨';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            initializeCountrySelector();
        });

        // í¼ ì œì¶œ í…ŒìŠ¤íŠ¸
        document.getElementById('add-log-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const country = formData.get('country');
            const city = formData.get('city');
            const startDate = formData.get('startDate');
            const endDate = formData.get('endDate');
            
            console.log('í¼ ë°ì´í„°:', {
                country,
                city,
                startDate,
                endDate
            });
            
            alert(`í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\nêµ­ê°€: ${country}\në„ì‹œ: ${city}\nì‹œì‘ì¼: ${startDate}\nì¢…ë£Œì¼: ${endDate}`);
        });
    </script>
</body>
</html>
