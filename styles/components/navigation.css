/* ===== 네비게이션 컴포넌트 스타일 ===== */
/* 
 * Phase 4: 완전한 중앙화 및 최적화
 * 모든 네비게이션 관련 스타일을 이 파일에서 중앙 관리
 */

/* ===== 네비게이션 CSS 변수 ===== */
:root {
    /* 네비게이션 기본 설정 */
    --navigation-height: 80px;
    --navigation-padding: 8px 4px;
    --navigation-icon-size: 24px;
    --navigation-label-size: 11px;
    
    /* 네비게이션 색상 */
    --navigation-bg: var(--bg-primary);
    --navigation-border: var(--gray-200);
    --navigation-shadow: 0 -2px 10px rgba(0, 0, 0, 0.08);
    
    /* 네비게이션 탭 상태 */
    --navigation-tab-bg: var(--white);
    --navigation-tab-hover: var(--gray-50);
    --navigation-tab-active: var(--primary-light);
    --navigation-tab-border: var(--primary-color);
    
    /* 네비게이션 아이콘 */
    --navigation-icon-color: var(--text-secondary);
    --navigation-icon-active: var(--primary-color);
    
    /* 네비게이션 레이블 */
    --navigation-label-color: var(--text-secondary);
    --navigation-label-active: var(--primary-color);
}

/* ===== 네비게이션 컨테이너 ===== */
.navigation-container {
    display: flex;
    background-color: var(--navigation-bg);
    border-top: 1px solid var(--navigation-border);
    box-shadow: var(--navigation-shadow);
    padding: 0;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: var(--z-fixed);
    height: var(--navigation-height);
}

/* 다크모드 네비게이션 컨테이너 */
.dark .navigation-container {
    background-color: var(--bg-secondary, #2d2d2d);
    border-top-color: var(--gray-400, #718096);
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
}

/* Phase 4: 기존 #tab-navigation과의 호환성을 위한 스타일 */
#tab-navigation {
    display: flex;
    background-color: var(--navigation-bg);
    border-top: 1px solid var(--navigation-border);
    box-shadow: var(--navigation-shadow);
    padding: 0;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: var(--z-fixed);
    height: var(--navigation-height);
}

/* Phase 4: 로그인 화면에서 네비게이션 숨김 처리 */
.main-app.hidden #tab-navigation,
.main-app.hidden .navigation-container {
    display: none !important;
}

/* 로그인 화면이 표시될 때 네비게이션 완전 숨김 */
#login-screen:not([style*="display: none"]) ~ #main-app #tab-navigation,
#login-screen:not([style*="display: none"]) ~ #main-app .navigation-container {
    display: none !important;
}

/* PHASE 1: 데스크톱 모드에서 모바일 탭 네비게이션 숨김 */
.main-app.desktop-mode #tab-navigation,
.main-app.desktop-mode .navigation-container {
    display: none !important;
}

/* 네비게이션 탭 안정성 개선 - Page Visibility API 대응 */
#tab-navigation {
    /* 기본적으로 표시 상태 유지 */
    display: flex !important;
    /* 페이지 가시성 변경 시에도 안정적으로 유지 */
    visibility: visible !important;
    opacity: 1 !important;
    /* GPU 가속으로 렌더링 안정성 향상 */
    transform: translate3d(0, 0, 0) !important;
    backface-visibility: hidden !important;
    will-change: transform !important;
}

/* 로그인 상태에서만 네비게이션 숨김 */
.main-app.hidden #tab-navigation {
    display: none !important;
}

/* 데스크톱 모드에서만 네비게이션 숨김 */
.main-app.desktop-mode #tab-navigation {
    display: none !important;
}

/* ===== 네비게이션 탭 ===== */
.navigation-tab {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--navigation-padding);
    background: var(--navigation-tab-bg);
    border: none;
    border-top: 3px solid transparent;
    cursor: pointer;
    transition: all var(--transition-normal);
    min-height: var(--navigation-height);
    position: relative;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

.navigation-tab:hover {
    background-color: var(--navigation-tab-hover);
}

.navigation-tab:active {
    background-color: var(--gray-100);
    transform: scale(0.98);
}

.navigation-tab.active {
    border-top-color: var(--navigation-tab-border);
    background-color: var(--navigation-tab-active);
}

.navigation-tab.active .navigation-icon {
    transform: scale(1.1);
    color: var(--navigation-icon-active);
}

.navigation-tab.active .navigation-label {
    color: var(--navigation-label-active);
    font-weight: var(--font-semibold);
}

/* Phase 4: 기존 .tab-btn과의 호환성을 위한 스타일 */
.tab-btn {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--navigation-padding);
    background: var(--navigation-tab-bg);
    border: none;
    border-top: 3px solid transparent;
    cursor: pointer;
    transition: all var(--transition-normal);
    min-height: var(--navigation-height);
    position: relative;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

.tab-btn:hover {
    background-color: var(--navigation-tab-hover);
}

.tab-btn:active {
    background-color: var(--gray-100);
    transform: scale(0.98);
}

/* 다크모드 탭 버튼 */
.dark .tab-btn {
    background: var(--bg-secondary, #2d2d2d);
    color: var(--text-primary, #f7fafc);
}

.dark .tab-btn:hover {
    background-color: var(--gray-100, #2d3748);
}

.dark .tab-btn:active {
    background-color: var(--gray-200, #4a5568);
}

.tab-btn.active {
    border-top-color: var(--navigation-tab-border);
    background-color: var(--navigation-tab-active);
}

.tab-btn.active .tab-icon {
    transform: scale(1.1);
    color: var(--navigation-icon-active);
}

.tab-btn.active .tab-label {
    color: var(--navigation-label-active);
    font-weight: var(--font-semibold);
}

/* 다크모드 활성 탭 */
.dark .tab-btn.active {
    background-color: var(--primary-color, #4dabf7);
    border-top-color: var(--primary-color, #4dabf7);
}

.dark .tab-btn.active .tab-icon {
    color: var(--white, #ffffff);
}

.dark .tab-btn.active .tab-label {
    color: var(--white, #ffffff);
}

/* ===== 네비게이션 아이콘 ===== */
.navigation-icon {
    font-size: var(--navigation-icon-size);
    margin-bottom: 4px;
    transition: all var(--transition-normal);
    color: var(--navigation-icon-color);
    line-height: 1;
}

/* Phase 4: 기존 .tab-icon과의 호환성을 위한 스타일 */
.tab-icon {
    font-size: var(--navigation-icon-size);
    margin-bottom: 4px;
    transition: all var(--transition-normal);
    color: var(--navigation-icon-color);
    line-height: 1;
}

/* ===== 네비게이션 레이블 ===== */
.navigation-label {
    font-size: var(--navigation-label-size);
    color: var(--navigation-label-color);
    font-weight: var(--font-medium);
    transition: all var(--transition-normal);
    line-height: 1.2;
    text-align: center;
    white-space: nowrap;
}

/* 다크모드 아이콘과 레이블 */
.dark .tab-icon {
    color: var(--text-secondary, #e2e8f0);
}

.dark .tab-label {
    color: var(--text-secondary, #e2e8f0);
}

/* Phase 4: 기존 .tab-label과의 호환성을 위한 스타일 */
.tab-label {
    font-size: var(--navigation-label-size);
    color: var(--navigation-label-color);
    font-weight: var(--font-medium);
    transition: all var(--transition-normal);
    line-height: 1.2;
    text-align: center;
    white-space: nowrap;
}

/* ===== 반응형 네비게이션 ===== */
@media (max-width: 768px) {
    .navigation-container,
    #tab-navigation {
        height: var(--navigation-height);
    }
    
    .navigation-tab,
    .tab-btn {
        min-height: var(--navigation-height);
        padding: var(--navigation-padding);
    }
    
    .navigation-icon,
    .tab-icon {
        font-size: var(--navigation-icon-size);
    }
    
    .navigation-label,
    .tab-label {
        font-size: var(--navigation-label-size);
    }
}

@media (min-width: 1024px) {
    .navigation-container,
    #tab-navigation {
        height: var(--navigation-height);
    }
}

/* ===== 네비게이션 애니메이션 ===== */
@keyframes navigationSlideUp {
    from {
        transform: translate3d(0, 100%, 0);
        opacity: 0;
    }
    to {
        transform: translate3d(0, 0, 0);
        opacity: 1;
    }
}

.navigation-container,
#tab-navigation {
    animation: navigationSlideUp 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    /* GPU 가속 최적화 */
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    will-change: transform;
}

/* 네비게이션 탭 전환 효과 최적화 */
.navigation-tab,
.tab-btn {
    /* 기존 transition 속성 유지하면서 GPU 가속 추가 */
    transition: all var(--transition-normal) cubic-bezier(0.4, 0, 0.2, 1);
    /* GPU 가속 최적화 */
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    will-change: transform, background-color, border-color;
}

.navigation-tab:hover,
.tab-btn:hover {
    background-color: var(--navigation-tab-hover);
    /* 호버 시 GPU 가속 유지 */
    transform: translate3d(0, 0, 0);
}

.navigation-tab:active,
.tab-btn:active {
    background-color: var(--gray-100);
    transform: scale3d(0.98, 0.98, 1);
    /* 액티브 상태에서도 GPU 가속 유지 */
    backface-visibility: hidden;
}

.navigation-tab.active,
.tab-btn.active {
    border-top-color: var(--navigation-tab-border);
    background-color: var(--navigation-tab-active);
    /* 액티브 상태에서 GPU 가속 유지 */
    transform: translate3d(0, 0, 0);
}

.navigation-tab.active .navigation-icon,
.tab-btn.active .tab-icon {
    transform: scale3d(1.1, 1.1, 1);
    color: var(--navigation-icon-active);
    /* 아이콘 애니메이션 최적화 */
    will-change: transform;
}

.navigation-tab.active .navigation-label,
.tab-btn.active .tab-label {
    color: var(--navigation-label-active);
    font-weight: var(--font-semibold);
    /* 레이블 전환 최적화 */
    will-change: color, font-weight;
}

/* ===== 네비게이션 접근성 ===== */
.navigation-tab:focus,
.tab-btn:focus {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
}

.navigation-tab:focus:not(:focus-visible),
.tab-btn:focus:not(:focus-visible) {
    outline: none;
}

/* ===== 네비게이션 다크모드 지원 ===== */
@media (prefers-color-scheme: dark) {
    :root {
        --navigation-bg: var(--bg-primary-dark, #1a202c);
        --navigation-border: var(--gray-700, #4a5568);
        --navigation-tab-bg: var(--bg-secondary-dark, #2d3748);
        --navigation-tab-hover: var(--gray-600, #4a5568);
    }
}
