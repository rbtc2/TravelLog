---
alwaysApply: true
description: TravelLog project architecture and module structure guidelines
---

# ğŸ—ï¸ TravelLog Architecture Rules

## ğŸ“‹ Project Overview
TravelLog is a modular SPA (Single Page Application) with a 5-tab structure. Each tab operates independently with dynamic module loading for optimal performance.

## ğŸ›ï¸ Core Architecture Principles

### 1. **Modularity** 
- Each feature is separated into independent modules
- Clear interfaces and separation of concerns
- Reusable component design

### 2. **Independence**
- Minimal dependencies between tabs
- Each module manages its own lifecycle
- Isolated state management

### 3. **Scalability**
- Plugin-style tab addition
- Independent version management per module
- Progressive feature expansion

### 4. **Performance**
- Lazy Loading (Lazy Loading)
- Memory-efficient resource management
- Optimized rendering pipeline

## ğŸ“ File Structure Guidelines

### **JavaScript Module Structure**
```
js/
â”œâ”€â”€ app.js                     # Main application entry point
â”œâ”€â”€ config/                    # Configuration files
â”‚   â””â”€â”€ app-config.js         # App configuration and metadata
â”œâ”€â”€ data/                      # Data management
â”‚   â””â”€â”€ countries-manager.js   # Country data management
â”œâ”€â”€ modules/                   # Common modules
â”‚   â”œâ”€â”€ search/               # Search system (refactored)
â”‚   â”œâ”€â”€ calendar/             # Calendar module
â”‚   â”œâ”€â”€ services/             # Service layer
â”‚   â”œâ”€â”€ ui-components/        # UI components
â”‚   â””â”€â”€ utils/                # Utility functions
â””â”€â”€ tabs/                     # Tab modules
    â”œâ”€â”€ home.js              # Home tab
    â”œâ”€â”€ search.js            # Search tab
    â”œâ”€â”€ add-log.js           # Add log tab
    â”œâ”€â”€ calendar.js          # Calendar tab
    â””â”€â”€ my-logs.js           # My logs tab
```

### **CSS Structure**
```
styles/
â”œâ”€â”€ main.css                  # Main stylesheet (imports all)
â”œâ”€â”€ base/                     # Base styles
â”‚   â”œâ”€â”€ variables.css         # CSS variables
â”‚   â”œâ”€â”€ reset.css            # CSS reset
â”‚   â”œâ”€â”€ typography.css       # Typography
â”‚   â”œâ”€â”€ layout.css           # Basic layout
â”‚   â”œâ”€â”€ buttons.css          # Basic buttons
â”‚   â”œâ”€â”€ forms.css            # Basic forms
â”‚   â””â”€â”€ messages.css         # Message styles
â”œâ”€â”€ components/               # Component styles
â”œâ”€â”€ layouts/                  # Layout styles
â”œâ”€â”€ pages/                    # Page-specific styles
â””â”€â”€ utilities/                # Utility styles
```

## ğŸ”„ Data Flow Patterns

### 1. **Application Initialization**
```
index.html â†’ app.js â†’ TabManager â†’ Load default tab
```

### 2. **Tab Switching Process**
```
User tab click â†’ TabManager.switchTab() â†’ 
Current tab cleanup() â†’ Load new tab module â†’ 
New tab render() â†’ New tab bindEvents()
```

### 3. **Data Management Flow**
```
UI Event â†’ Event Handler â†’ Service Layer â†’ 
Data Repository â†’ Local Storage â†’ UI Update
```

## ğŸ¯ Design Patterns

### 1. **MVC Pattern**
- **Model**: Data and business logic
- **View**: UI rendering and user interface
- **Controller**: User input handling and state management

### 2. **Observer Pattern**
- Event-based communication
- Loose coupling
- Real-time UI updates

### 3. **Factory Pattern**
- Dynamic tab module creation
- Configuration-based component creation
- Flexible extensibility

### 4. **Strategy Pattern**
- Search algorithm strategies
- Sorting method strategies
- Rendering strategies

## ğŸš€ Performance Optimization

### 1. **Code Splitting**
- Tab-by-tab module separation
- Load only when needed
- Bundle size optimization

### 2. **Memory Management**
- Resource cleanup on tab switch
- Event listener cleanup
- DOM element cleanup

### 3. **Rendering Optimization**
- Virtual scrolling
- Lazy loading
- Image optimization

## ğŸ”§ Module Development Guidelines

### **Tab Module Interface**
Every tab module must implement:
```javascript
class BaseTab {
    constructor() {
        this.isInitialized = false;
        this.container = null;
    }
    
    // Required methods
    render(container) { /* Implementation required */ }
    cleanup() { /* Implementation required */ }
    bindEvents() { /* Implementation required */ }
}
```

### **Module Lifecycle**
1. **Initialization**: Module instantiation and setup
2. **Rendering**: UI creation and DOM manipulation
3. **Event Binding**: User interaction handling
4. **Cleanup**: Resource cleanup and memory management

## ğŸ“Š Module Dependencies

### **Core Dependencies**
- [app.js](mdc:js/app.js) - Main application controller
- [app-config.js](mdc:js/config/app-config.js) - Configuration management

### **Common Modules**
- [storage-manager.js](mdc:js/modules/utils/storage-manager.js) - Data persistence
- [event-manager.js](mdc:js/modules/utils/event-manager.js) - Event handling
- [toast-manager.js](mdc:js/modules/ui-components/toast-manager.js) - Notifications

### **Tab-Specific Modules**
- Search: [SearchTab.js](mdc:js/modules/search/SearchTab.js)
- Calendar: [CalendarRenderer.js](mdc:js/modules/calendar/CalendarRenderer.js)
- My Logs: [MyLogsController.js](mdc:js/tabs/my-logs/controllers/MyLogsController.js)

## ğŸ”’ Security Considerations

### 1. **Input Validation**
- User input sanitization
- XSS attack prevention
- CSRF token management

### 2. **Data Protection**
- Sensitive information encryption
- Local storage security
- API key security

## ğŸ§ª Testing Strategy

### 1. **Unit Testing**
- Module-by-module functionality testing
- Utility function testing
- Component testing

### 2. **Integration Testing**
- Inter-tab interaction testing
- Data flow testing
- API integration testing

### 3. **E2E Testing**
- User scenario testing
- Cross-browser testing
- Performance testing

## ğŸ”® Future Architecture Improvements

### 1. **Micro Frontend**
- Independent tab deployment
- Improved version management
- Team-independent development

### 2. **State Management Improvement**
- Global state management introduction
- Improved state synchronization
- Enhanced debugging tools

### 3. **Performance Monitoring**
- Real-time performance metrics
- User behavior analysis
- Automatic optimization